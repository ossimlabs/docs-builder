<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
       xmlns:p="http://www.springframework.org/schema/p" xmlns:c="http://www.springframework.org/schema/c"
       xmlns:util="http://www.springframework.org/schema/util" xmlns:rbf="http://www.radiantblue.com/schema/rb/foundation"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.1.xsd
        http://www.springframework.org/schema/util
        http://www.springframework.org/schema/util/spring-util-3.1.xsd
        http://www.radiantblue.com/schema/rb/foundation
        http://www.radiantblue.com/schema/rb/foundation/rb-foundation-1.0.xsd">



    <bean id="RS02"
          class="com.radiantblue.analytics.isr.core.model.asset.Satellite"
          scope="prototype">
        <property name="name" value="RS02" />
        <property name="id" value="32382" />
        <property name="propagator" ref="RS02_propagator" />

        <property name="ssdr">
            <bean class="com.radiantblue.analytics.isr.core.model.ssdr.SSDR"
                  factory-method="apply">
                <constructor-arg>
                    <rbf:data_volume units="Gb" value="500" />
                </constructor-arg>
            </bean>
        </property>

        <property name="interpolator">
            <bean
                    class="com.radiantblue.analytics.mechanics.statevectors.RawStateVectorProviderInterpolator" />
        </property>

        <!-- defines a rev and pass calculator using the ascending node to increment
            revs -->
        <property name="revAndPassCalculator" ref="RS02_RevPassCalc" />

        <property name="payloads">
            <list>
                <bean class="com.radiantblue.analytics.isr.core.model.payload.Payload">
                    <property name="name" value="RS02_DownlinkPayload" />
                    <property name="accessConstraints">
                        <list>
                            <bean
                                    class="com.radiantblue.analytics.aerospace.geometry.constraint.GrazeConstraint">
                                <property name="range">
                                    <rbf:angular_range units="deg" min="5" max="90" />
                                </property>
                            </bean>
                        </list>
                    </property>

                    <property name="mount">
                        <bean
                                class="com.radiantblue.analytics.isr.core.model.payload.mount.VectorPayloadMount">
                            <property name="payloadXInBodyFrame">
                                <rbf:vector3d delimeter="," value="1,0,0" />
                            </property>
                            <property name="payloadYInBodyFrame">
                                <rbf:vector3d delimeter="," value="0,1,0" />
                            </property>
                            <property name="payloadZInBodyFrame">
                                <rbf:vector3d delimeter="," value="0,0,1" />
                            </property>
                        </bean>
                    </property>

                    <property name="sensors">
                        <list>
                            <bean class="com.radiantblue.analytics.isr.comms.DownlinkSensor">
                                <property name="name" value="RS02_CommSensor" />
                                <property name="modes">
                                    <list>
                                        <bean class="com.radiantblue.analytics.isr.comms.DownlinkCommMode">
                                            <property name="name" value="RS02_DownlinkMode" />
                                            <property name="accessConstraints">
                                                <list>
                                                    <bean
                                                            class="com.radiantblue.analytics.isr.core.component.accgen.constraint.RequirementTypeConstraint">
                                                        <property name="requiredRequirementType"
                                                                  value="com.radiantblue.analytics.isr.core.model.requirement.IDownlinkRequirement" />
                                                    </bean>
                                                </list>
                                            </property>

                                            <property name="attitudeCalculator">
                                                <bean
                                                        class="com.radiantblue.analytics.isr.assets.attitude.GenericTrackingAttitudeSelector">
                                                    <property name="payloadMount">
                                                        <bean
                                                                class="com.radiantblue.analytics.isr.core.model.payload.mount.VectorPayloadMount">
                                                            <property name="payloadXInBodyFrame">
                                                                <rbf:vector3d delimeter="," value="1,0,0" />
                                                            </property>
                                                            <property name="payloadYInBodyFrame">
                                                                <rbf:vector3d delimeter="," value="0,0,-1" />
                                                            </property>
                                                            <property name="payloadZInBodyFrame">
                                                                <rbf:vector3d delimeter="," value="0,1,0" />
                                                            </property>
                                                        </bean>
                                                    </property>
                                                </bean>
                                            </property>
                                        </bean>
                                    </list>
                                </property>
                            </bean>
                        </list>
                    </property>
                </bean>
                <bean class="com.radiantblue.analytics.isr.core.model.payload.Payload">
                    <property name="name" value="RS02_Payload" />

                    <property name="sensors">
                        <list>
                            <bean class="com.radiantblue.analytics.isr.sar.RadarSensor"
                                  p:name="RS02_Framing_Sensor">
                                <property name="displayFOR">
                                    <bean id="ButterflyFootprint_NoNotch"
                                          class="com.radiantblue.analytics.aerospace.geometry.footprint.ButterflyFOR">
                                        <property name="squintRange">
                                            <rbf:angular_range units="deg" min="85"
                                                               max="95" />
                                        </property>

                                        <property name="squintStep">
                                            <rbf:angle units="deg" value="1.0" />
                                        </property>

                                        <property name="grazeRange">
                                            <rbf:angular_range units="deg" min="29.65"
                                                               max="80" />
                                        </property>

                                        <property name="minCrosstrackRange">
                                            <rbf:length units="km" value="0" />
                                        </property>

                                        <property name="grazeStep">
                                            <rbf:angle units="deg" value="1.0" />
                                        </property>

                                        <property name="fovSide" value="BOTH" />
                                    </bean>
                                </property>
                                <property name="modes">
                                    <list>
                                        <ref bean="RS02_Custom_SAR_Mode" />
                                    </list>
                                </property>

                            </bean>

                        </list>
                    </property>

                    <property name="accessConstraints">
                        <list>
                            <bean
                                    class="com.radiantblue.analytics.aerospace.geometry.constraint.GrazeConstraint">
                                <property name="range">
                                    <rbf:angular_range units="deg" min="29.65"
                                                       max="80" />
                                </property>
                            </bean>
                            <bean
                                    class="com.radiantblue.analytics.aerospace.geometry.constraint.UnsignedSquintConstraint">
                                <property name="range">
                                    <rbf:angular_range units="deg" min="85" max="95" />
                                </property>
                            </bean>
                        </list>
                    </property>

                </bean>
            </list>
        </property>
    </bean>


<!-- Insert any singleton beans into an assets _Beans file. These beans
    will be loaded once while the assets will be initialized each time it is
    accessed -->

<!-- defines the TLE we want to use -->
<bean id="RS02_tle"
      class="com.radiantblue.analytics.mechanics.orbit.elementproviders.TLEElementProvider"
      p:line0="RADARSAT-2"
      p:line1="1 32382U 07061A   12242.20679343  .00000121  00000-0  63898-4 0  2015"
      p:line2="2 32382  98.5807 248.1925 0001128  81.3563  57.9585 14.29983238245768">
</bean>

<!-- defines an J2 propagator using the TLE -->
<bean id="RS02_propagator" class="com.radiantblue.analytics.mechanics.orbit.J2Propagator"
      c:provider-ref="RS02_tle" />

<bean id="RS02_RevPassCalc"
      class="com.radiantblue.analytics.mechanics.orbit.revandpass.AscendingNodeRevAndPassCalculator ">
    <property name="epochRevAndPass">
        <bean
                class="com.radiantblue.analytics.mechanics.orbit.revandpass.RevAndPassFromTLE"
                p:tle-ref="RS02_tle" />
    </property>

    <property name="sampleStep">
        <rbf:timespan units="minutes" value="10" />
    </property>

    <property name="stateVectorProvider" ref="RS02_propagator" />

</bean>

<bean name="ManeuverModel"
      class="com.radiantblue.analytics.gnc.maneuver.EigenAxisManeuverModel"
      scope="prototype">
    <property name="rateSelector">
        <bean
                class="com.radiantblue.analytics.core.maneuver.r3.EllipsoidalEigenAxisRateSelector">
            <property name="javLimits">
                <bean class="com.radiantblue.analytics.core.maneuver.r3.JAVLimits"
                      c:velocityLimits-ref="3DegPerSecLimits" c:accelerationLimits-ref="3DegPerSecLimits"
                      c:jerkLimits-ref="3DegPerSecLimits" />
            </property>
        </bean>
    </property>

    <property name="cruiseAttitudeSelector">
        <bean
                class="com.radiantblue.analytics.isr.assets.attitude.SolarTrackingAttitudeSelector">
            <property name="solarPanelMount">
                <bean
                        class="com.radiantblue.analytics.isr.core.model.payload.mount.VectorPayloadMount">
                    <property name="payloadZInBodyFrame">
                        <rbf:vector3d delimeter="," value="1,0,0" />
                    </property>
                    <property name="payloadYInBodyFrame">
                        <rbf:vector3d delimeter="," value="0,-1,0" />
                    </property>
                    <property name="payloadXInBodyFrame">
                        <rbf:vector3d delimeter="," value="0,0,1" />
                    </property>
                </bean>
            </property>
        </bean>
    </property>
</bean>

<bean id="RS02_SAR_table"
      class="com.radiantblue.analytics.isr.sar.framer.table.FixedValueSARFrameTable">
    <property name="avgPowerWatts" value="9000" />
    <property name="dwellTime">
        <rbf:timespan units="millisecs" value="3000" />
    </property>
    <property name="fileSize">
        <rbf:data_volume units="Gb" value="1.0" />
    </property>
    <property name="frameSizeInAzimuthDirection">
        <rbf:length units="km" value="20" />
    </property>
    <property name="frameSizeInRangeDirection">
        <rbf:length units="km" value="20" />
    </property>
    <property name="quality" value="4.0" />
</bean>

<bean
	id="RS02_Custom_SAR_Mode"
	class="com.maxar.asset.common.customasset.sensormode.CustomSarSensorMode">

    <property name="attitudeCalculator">
        <bean
                class="com.radiantblue.analytics.isr.sar.attitude.GenericRadarAttitudeSelector">
        </bean>
    </property>

	<property name="qualityCalculator">
		<bean class="com.maxar.asset.common.customasset.sensormode.qualitycalculator.UnclassInlineQualityCalculator" />
	</property>

	<property name="dwellCalculator">
		<bean class="com.maxar.asset.common.customasset.dwell.UnclassDwellCalculator" />
	</property>

	<property name="nch" value="1" />
	<property name="antArea" value="10.0" />
	<property name="bwrf" value="300.0" />
	<property name="ipr" value="5.0" />
	<property name="peakPW" value="1500.0" />
	<property name="fc" value="1.275" />
	<property name="maxTDTY" value="25.0" />
	<property name="t0" value="2.2" />
	<property name="nf" value="0.75" />
	<property name="loss" value="0.95" />
	<property name="mnrReq" value="0.65" />
	<property name="azmIPRFac" value="1.02" />
	<property name="rngIPRFac" value="1.01" />
	<property name="minTimeBetweenDwells" value="1.2" />
</bean>

</beans>
